<!DOCTYPE html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="showport" content="width=device-width, initial-scale=1">
        <meta name="description" content="Garage Challenge">
        <title>Garage Challenge</title>
        <link href="./less/main.less" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Nunito" rel="stylesheet">
    </head>
    <body>
        <div class="page">
            <div class="heading">
                <h1>TEAM</h1>
            </div>

            <nav class="menu">
                <ul class="menu__list">
                    <li class="menu__item">
                        <a class="menu__link is--active" href="">All</a>
                    </li>
                    <li class="menu__item">
                        <a class="menu__link" href="">Berlin</a>
                    </li>
                    <li class="menu__item">
                        <a class="menu__link" href="">Amsterdam</a>
                    </li>
                    <li class="menu__item">
                        <a class="menu__link" href="">Cape Town</a>
                    </li>
                </ul>
            </nav>

            <div class="gridCards"></div>

        </div>
        <script src="./index.js"></script>

        <!-- display cards --> 
        <script>
            function displayTeamMembers(teamMembers) {

                var gridCards = document.getElementsByClassName('gridCards');

                for (var i = 0; i < teamMembers.length; i++) {

                    var card = document.createElement('div');
                    var cardMedia = document.createElement('div');
                    var cardInfo = document.createElement('div');
                    var cardName = document.createElement('p');
                    var cardRole = document.createElement('p');
                    var cardTags = document.createElement('ul');

                    card.classList.add('gridCards__item', teamMembers[i].location);
                    cardMedia.classList.add('gridCards__media');
                    cardInfo.classList.add('gridCards__info');
                    cardName.classList.add('gridCards__name');
                    cardRole.classList.add('gridCards__role');
                    cardTags.classList.add('gridCards__tags');

                    cardMedia.innerHTML = '<img src="'+teamMembers[i].image+'" />';
                    cardName.textContent = teamMembers[i].name;
                    cardRole.textContent = teamMembers[i].role;

                    var arrayTags = teamMembers[i].tags;
                    for (var j = 0; j < arrayTags.length; j++) {
                        var listItem = document.createElement('li');
                        listItem.innerHTML = arrayTags[j];
                        cardTags.appendChild(listItem);
                    }

                    card.append(cardMedia);
                    card.append(cardInfo);
                    cardInfo.append(cardName);
                    cardInfo.append(cardRole);
                    cardInfo.append(cardTags);

                    gridCards[0].appendChild(card);
                }
            }
        </script>
        <script src="./team.js"></script>

        <!-- filter cards -->
        <script>
            // animate cards on start
            var gridCards = document.querySelectorAll('.gridCards__item');
            animate(gridCards);

             // filter and add active class on click
            var menuItems = document.querySelectorAll('.menu__item a');
            menuItems.forEach(menuItem => {
                menuItem.addEventListener('click', addActiveClass);
                menuItem.addEventListener('click', function(e) {
                    e.preventDefault();
                    filterCards(menuItem);
                });
            });

            // add active class function
            function addActiveClass(e) {
                var current = document.getElementsByClassName('is--active');
                if (current.length > 0) { 
                    current[0].className = current[0].className.replace(' is--active', "");
                }
                this.className += ' is--active';
            }

            // filter function
            function filterCards(element) {
                var menuItemText = element.textContent;
                var textTolowerCase = menuItemText.split(' ').join('').toLowerCase();

                if (menuItemText === 'All') {
                    hide(gridCards);
                    animate(gridCards);
                } else {
                    hide(gridCards);
                }
                animate(document.querySelectorAll('.' + textTolowerCase));
            };

            // hide function
            function hide(items) {
                items.forEach(item => {
                    item.classList.remove('is--visible');
                });
            };

            // animate function
            function animate(item) {
                (function show(counter) {
                    setTimeout(function() {
                        item[counter].classList.add('is--visible');
                        counter++;
                        if (counter < item.length) show(counter);
                    },50);
                })(0);
            };
        </script>
    </body>
</html>